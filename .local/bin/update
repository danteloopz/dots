#!/bin/bash

# Script to update pacman packages via yay and Flatpak packages

# Colors for output
GREEN="\e[32m"
RED="\e[31m"
BLUE="\e[34m"
RESET="\e[0m"

# Prompt the user for confirmation
gum confirm "Do you wish to update your system?" || exit 1

if [[ $OSTYPE == 'darwin'* ]]; then
	if brew update && brew upgrade; then
		echo "Brew updated successfully"
	else 
	    echo -e "${RED}Failed to update Brew packages.${RESET}"
	    exit 1
	fi
	echo "Starting system update"
	sudo softwareupdate --install --all
else
	# Update pacman packages via yay
	if yay -Syu --noconfirm; then
		echo "AUR packages updated successfully"
	else
	    echo -e "${RED}Failed to update pacman and AUR packages.${RESET}"
	    exit 1
	fi
fi

echo -e "\nPress enter key to close"

read -r
